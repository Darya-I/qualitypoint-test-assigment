## Привет, QualityPoint Development!

### UPD: Удаление зависимости от DaData NuGet Package

- Полностью удалён класс `DaDataService` и интерфейс `IDadataService`.
- Вместо него добавлен новый интерфейс `IDadataClient` и его реализация `DadataClient`:
  - Реализован кастомный HTTP-клиент для работы с API DaData через `HttpClient`.
  - Добавлена десериализация ответов в новую модель `CleanAddress`.
  - Заголовки, структура тела запроса и обработка ошибок приведены в соответствие с документацией DaData.
- Контроллер `AddressController` обновлён для работы с `DadataClient`:

<details>
	<summary>Детали задания </summary>
		

	Описание задачи: 
	Необходимо разработать веб-сервис, который получает от пользователя адрес, запросом к сервису DaData (https://dadata.ru/api/clean/address/) выполняет его стандартизацию, затем возвращает полученный ответ пользователю в виде модели с определенным набором полей. Стандартизация адресов в этом сервисе разбивает адрес по КЛАДР / ФИАС (ГАР), затем определяет индекс, координаты, район города и другую полезную информацию. 

	Требования к приложению:
	-  ASP.NET Core WebApi 
	- 1 GET эндпоинт, принимает только одну строку, возвращает модель, содержащую в себе страну, город, улицу, номер дома, номер помещения и т.д. – на Ваше усмотрение, но не меньше 5 полей
	- Следует использовать DI для всех необходимых сервисов
	- Использование Automapper для конвертации запросов/ответов
	- Работа с файлами конфигурации (все токены, секреты, адреса должны быть в appsettings.json, использовать подход IOptions)
	- Корректная работа с HttpClient (использование IHttpClientFactory для типизированных/именованных клиентов)
	- Обработка исключений с помощью middleware/фильтров/IExceptionHandler (не писать try/catch в контроллере)
	- Логирование с помощью Serilog/NLog
	- Стандартная CORS политика
	- Подключенный Swagger
	- Меньше файлов, папок и проектов – лучше

</details>

Проект представляет собой простой веб-сервис, связывающийся с Dadata и стандартизирующий адрес.

1. Установленные библиотеки:
	- AutoMapper,
	- Serilog,
	- Swashbuckle,
	- System.Text

1. Обработка ошибок с помощью middleware, исключения логируются и возвращаются в виде json-ответов. Логи выводятся в консоль и в файл (отдельная папка **Middleware** + создается папка log)
1. Напрямую с API Dadata работает сервис **DaDataService**.  Сервис получает доступ к `IHttpClientFactory` для создания HTTP клиентов. Для конфигурации используются данные из `appsettings.json`, которые загружаются через `IOptions<DaDataSettings>`. Файлы объединены в папке Services для удобства и минимизации папок.
	
	Метод `StandardizeAddressAsync` принимает строку с адресом, проверяет, что адрес не пустой. Он создает HTTP клиент с помощью `IHttpClientFactory`, который используется для отправки запроса к DaData API. Запрос отправляется в метод `CleanClientAsync.Clean<Address>`, который формирует стандартизованный адрес. В случае успешного ответа, метод возвращает стандартизованный адрес. В случае ошибки или если API вернул пустой результат, метод логирует ошибку и выбрасывает исключение.
4. Контроллер AddressController, принимает запросы на стандартизацию адресов. Адрес передается как строка в параметре запроса, после чего вызывается сервис DaDataService для стандартизации. Результат стандартизации маппируется с помощью AutoMapper в модель ответа AddressResponse.